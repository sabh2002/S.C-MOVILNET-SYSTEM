{% extends 'base.html' %}

{% block title %}Dashboard - Movilnet System{% endblock %}

{% block content %}
<!-- Page Header -->
<div class="page-header">
    <div class="page-header-left">
        <div class="breadcrumb">
            <i class="fas fa-home"></i>
            <span>Panel de Control</span>
        </div>
        <h1 class="page-title">Bienvenido{% if request.user.first_name %}, {{ request.user.first_name }}{% endif %}</h1>
        <p class="page-subtitle">Resumen general del sistema de inventario</p>
    </div>
</div>

<!-- Stats Cards -->
<div class="stats-grid animate-slide-up">
    <!-- Productos -->
    <div class="stat-card hover-lift">
        <div class="stat-icon">
            <i class="fas fa-mobile-alt"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_productos }}</div>
            <div class="stat-label">Productos Activos</div>
        </div>
        <a href="{% url 'producto_list' %}" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-light);">
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <!-- Clientes -->
    <div class="stat-card info hover-lift">
        <div class="stat-icon">
            <i class="fas fa-users"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_clientes }}</div>
            <div class="stat-label">Clientes Registrados</div>
        </div>
        <a href="{% url 'cliente_list' %}" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-light);">
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <!-- Proveedores -->
    <div class="stat-card success hover-lift">
        <div class="stat-icon">
            <i class="fas fa-truck"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_proveedores }}</div>
            <div class="stat-label">Proveedores</div>
        </div>
        <a href="{% url 'proveedor_list' %}" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-light);">
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>

    <!-- Marcas -->
    <div class="stat-card warning hover-lift">
        <div class="stat-icon">
            <i class="fas fa-tags"></i>
        </div>
        <div class="stat-content">
            <div class="stat-value">{{ total_marcas }}</div>
            <div class="stat-label">Marcas</div>
        </div>
        <a href="{% url 'marca_list' %}" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-light);">
            <i class="fas fa-arrow-right"></i>
        </a>
    </div>
</div>

<!-- Stock Alert -->
{% if productos_bajo_stock > 0 %}
<div class="alert alert-warning animate-slide-up" style="margin-bottom: 24px;">
    <i class="fas fa-exclamation-triangle"></i>
    <div>
        <strong>Alerta de Inventario:</strong> Hay <strong>{{ productos_bajo_stock }}</strong> producto(s) con stock bajo o agotado.
        <a href="{% url 'producto_list' %}" style="color: inherit; text-decoration: underline;">Ver productos</a>
    </div>
</div>
{% endif %}

<!-- Quick Actions & Recent Activity -->
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px;">
    <!-- Quick Actions Card -->
    <div class="card animate-slide-up">
        <div class="card-header">
            <h3 class="card-title"><i class="fas fa-bolt" style="color: var(--warning); margin-right: 8px;"></i>Accesos Rápidos</h3>
        </div>
        <div class="card-body">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                <a href="{% url 'producto_create' %}" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Producto
                </a>
                <a href="{% url 'cliente_create' %}" class="btn btn-outline">
                    <i class="fas fa-user-plus"></i> Cliente
                </a>
                <a href="{% url 'movimiento_create' %}" class="btn btn-outline">
                    <i class="fas fa-exchange-alt"></i> Movimiento
                </a>
                <a href="{% url 'nota_entrega_create' %}" class="btn btn-outline">
                    <i class="fas fa-file-alt"></i> Nota Entrega
                </a>
                <a href="{% url 'cotizacion_create' %}" class="btn btn-outline">
                    <i class="fas fa-file-invoice"></i> Cotización
                </a>
                <a href="{% url 'orden_compra_create' %}" class="btn btn-outline">
                    <i class="fas fa-shopping-cart"></i> Orden Compra
                </a>
            </div>
        </div>
    </div>

    <!-- System Info Card -->
    <div class="card animate-slide-up">
        <div class="card-header">
            <h3 class="card-title"><i class="fas fa-info-circle" style="color: var(--info); margin-right: 8px;"></i>Información del Sistema</h3>
        </div>
        <div class="card-body">
            <div style="display: flex; flex-direction: column; gap: 16px;">
                <div style="display: flex; justify-content: space-between; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                    <span style="color: var(--text-gray);">Usuario activo</span>
                    <span style="font-weight: 600;">{{ request.user.username }}</span>
                </div>
                <div style="display: flex; justify-content: space-between; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                    <span style="color: var(--text-gray);">Rol</span>
                    <span class="badge badge-info">
                        {% if request.user.is_superuser %}
                            Superusuario
                        {% elif request.user.perfil %}
                            {{ request.user.perfil.get_rol_display }}
                        {% else %}
                            Empleado
                        {% endif %}
                    </span>
                </div>
                <div style="display: flex; justify-content: space-between; padding-bottom: 12px; border-bottom: 1px solid var(--border-color);">
                    <span style="color: var(--text-gray);">Total en inventario</span>
                    <span style="font-weight: 600;">{{ total_productos }} productos</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span style="color: var(--text-gray);">Versión</span>
                    <span class="badge badge-secondary">v1.0 MVP</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<div style="margin-top: 32px; text-align: center;">
    <p style="color: var(--text-light); font-size: 0.85rem;">
        <i class="fas fa-signal" style="color: var(--primary-color);"></i>
        Sistema de Gestión Movilnet
    </p>
</div>
{% endblock %}
