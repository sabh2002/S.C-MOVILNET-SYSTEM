{% extends 'base.html' %}

{% block title %}Cotización COT-{{ cotizacion.pk }} - Movilnet System{% endblock %}

{% block content %}
<div class="header-section" style="margin-bottom: 30px; display: flex; justify-content: space-between; align-items: center;">
    <h1 class="header-title"><i class="fas fa-file-invoice-dollar"></i> Cotización COT-{{ cotizacion.pk }}</h1>
    <div style="display: flex; gap: 10px;">
        <a href="{% url 'cotizacion_update' cotizacion.pk %}" class="btn btn-primary">
            <i class="fas fa-edit"></i> Editar
        </a>
        <a href="{% url 'cotizacion_list' %}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
    <div style="background: white; padding: 20px; border-radius: 8px;">
        <h3 style="margin-bottom: 15px; color: var(--text-gray);">Información General</h3>
        <p><strong>Proveedor:</strong> {{ cotizacion.proveedor.nombre }}</p>
        <p><strong>RIF:</strong> {{ cotizacion.proveedor.rif }}</p>
        <p><strong>Fecha:</strong> {{ cotizacion.fecha_cotizacion|date:"d/m/Y" }}</p>
        <p><strong>Validez:</strong> {{ cotizacion.validez_dias }} días</p>
        <p><strong>Estado:</strong>
            <span style="padding: 3px 10px; border-radius: 20px; font-size: 0.8rem;
                {% if cotizacion.estado == 'aprobada' %}background-color: #d4edda; color: #155724;
                {% elif cotizacion.estado == 'rechazada' %}background-color: #f8d7da; color: #721c24;
                {% else %}background-color: #fff3cd; color: #856404;{% endif %}">
                {{ cotizacion.get_estado_display }}
            </span>
        </p>
    </div>
    <div style="background: white; padding: 20px; border-radius: 8px;">
        <h3 style="margin-bottom: 15px; color: var(--text-gray);">Observaciones</h3>
        <p>{{ cotizacion.observaciones|default:"Sin observaciones" }}</p>
    </div>
</div>

<div style="background: white; padding: 20px; border-radius: 8px;">
    <h3 style="margin-bottom: 15px; color: var(--text-gray);">Productos</h3>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: var(--bg-light); border-bottom: 2px solid var(--border-color);">
                <th style="padding: 12px 16px; text-align: left;">Producto</th>
                <th style="padding: 12px 16px; text-align: center;">Cantidad</th>
            </tr>
        </thead>
        <tbody>
            {% for detalle in cotizacion.detalles.all %}
            <tr style="border-bottom: 1px solid var(--border-color);">
                <td style="padding: 12px 16px;">{{ detalle.producto.nombre }}</td>
                <td style="padding: 12px 16px; text-align: center;">{{ detalle.cantidad }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="2" style="padding: 20px; text-align: center; color: var(--text-gray);">
                    No hay productos en esta cotización.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
